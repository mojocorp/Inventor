include $(IVDEPTH)/make/system
include $(IVDEPTH)/make/commondefs

IVCOMMONRULES = $(IVDEPTH)/make/ivcommonrules



#
# Settings for systems without single-precision math functions.
#

# MATHDEFS = -D_DOUBLE_MATH_ONLY
# LCXXDEFS += $(MATHDEFS)
# LCDEFS += $(MATHDEFS)



#
# Settings for IRIX systems.
#

ifeq ($(usingIrix), 1)

# Define this to have menus appear in the popup planes instead of the normal
# planes. You lose menu colors, but don't have to redraw the scene just to see
# a menu.
LCXXDEFS += -DMENUS_IN_POPUP

LD = $(TOOLROOT)/usr/bin/CC
LLDDSOOPTS += -Wl,-full_transitive_link
LLDOPTS += -Wl,-full_transitive_link
LD_QUICKSTART_INFO =

endif



#
# Override variables in commondefs when building on Linux systems.
#

ifeq ($(usingLinux), 1)

CC  = /usr/bin/gcc
C++ = /usr/bin/g++
LD  = /usr/bin/g++

INSTALL = /usr/bin/install

# MKDEPOPT = -MD

GLDDSOOPTS = -shared -Wl,--whole-archive
POST_LDDSOOPTS = -Wl,--no-whole-archive

endif



#
# Additional settings for Linux systems and GNU compilers.
#

ifeq ($(usingLinux), 1)

LINUXOPTS = -fPIC
LCXXOPTS += $(LINUXOPTS)
LCOPTS += $(LINUXOPTS)

X11DIR = /usr/X11R6
X11INCDIR = $(X11DIR)/include
X11LIBDIR = $(X11DIR)/lib

LCXXINCS += -I$(X11INCDIR)
LCINCS += -I$(X11INCDIR)

LDDSOOPTS += -L$(X11LIBDIR)
LDOPTS += -L$(X11LIBDIR)

endif



#
# Determine optimization from LIBTYPE.
#

OPTIMIZER = -O -DNDEBUG
ifneq (, $(findstring debug, $(LIBTYPE)))
OPTIMIZER = -g
endif



#
# Inventor library include directories.
#

IVLIBHDRDIRS = \
	-I. \
	-I$(IVDEPTH)/lib/database/include \
	-I$(IVDEPTH)/lib/interaction/include \
	-I$(IVDEPTH)/lib/nodekits/include \
	-I$(IVDEPTH)/libSoXt/include

LCXXINCS += $(IVLIBHDRDIRS)
LCINCS += $(IVLIBHDRDIRS)



#
# Font library directories.
#

FLDIR = $(IVDEPTH)/libFL/src
FLLIB = -lFL
ifdef FREETYPE
FLDIR = $(IVDEPTH)/libFL/freetype
FLLIB += -lfreetype
endif



#
# Tools for generating Inventor man pages.
#

IVPPPDIR = $(IVDEPTH)/tools/ppp
IVPPP = $(IVPPPDIR)/ppp
IVMANDIR = $(shell dirname $(IVDEPTH))/doc/man/ivman
IVMAN = $(IVMANDIR)/ivman
MAKEMANDIRS = $(IVMANDIR)/makeManDirs



#
# Inventor install directories.
#

IVBINDIR = $(IVROOT)/usr/bin
IVLIBDIR = $(IVROOT)/usr/lib
IVDLIBDIR = $(IVLIBDIR)/InventorDebug
IVHDRTOP = $(IVROOT)/usr/include/Inventor
IVHDRDIR = $(IVHDRTOP)/$(HDRSUBDIR)
IVMAN1DIR = $(IVROOT)/usr/man/man1
IVMAN3DIR = $(IVROOT)/usr/man/man3
IVHELPDIR = $(IVROOT)/usr/share/help
IVDATADIR = $(IVROOT)/usr/share/data/models
IVDEMODIR = $(IVROOT)/usr/demos
IVDEMOBINDIR = $(IVDEMODIR)/Inventor
IVDEMODATADIR = $(IVDEMODIR)/data/Inventor



#
# Locate installed Inventor libraries when linking applications.
#

ifneq (, $(findstring debug, $(LIBTYPE)))
LLDDSOOPTS += -L$(IVDLIBDIR)
LLDOPTS += -L$(IVDLIBDIR)
else
LLDDSOOPTS += -L$(IVLIBDIR)
LLDOPTS += -L$(IVLIBDIR)
endif
